@page
@model DevCapacityWebApp.Pages.Teams.EditModel
@await Html.PartialAsync("_Tabs")

<h3>Edit Team</h3>

<form method="post" class="mb-3">
  <input type="hidden" asp-for="Team.TeamId" />
  <div class="mb-2">
    <input class="form-control" asp-for="Team.Name" placeholder="Name" />
  </div>

  <div class="d-flex gap-2">
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn btn-secondary" href="/Teams">Cancel</a>
    <button class="btn btn-danger ms-2" type="submit" formaction="?handler=Delete" formmethod="post">Delete Team</button>
  </div>
</form>

<hr />

<h4>Engineers in this Team</h4>

@if (Model.AssignedEngineers == null || !Model.AssignedEngineers.Any())
{
  <p class="text-muted">No engineers assigned to this team.</p>
}
else
{
  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr><th>Id</th><th>Name</th><th>Role</th><th></th></tr>
      </thead>
      <tbody>
        @foreach (var e in Model.AssignedEngineers)
        {
          <tr>
            <td>@e.Id</td>
            <td>@e.Name</td>
            <td>@e.Role</td>
            <td>
              <a class="btn btn-sm btn-secondary" href="/Engineers/Edit?id=@e.Id">Edit</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}