@page
@model DevCapacityWebApp.Pages.Initiatives.EditModel
@await Html.PartialAsync("_Sidebar")

<h3>Edit Initiative</h3>

<form method="post" class="mb-3">
  <input type="hidden" asp-for="Initiative.Id" />
  <div class="mb-2">
    <input class="form-control" asp-for="Initiative.Name" placeholder="Name" />
  </div>
  <div class="mb-2">
    <input class="form-control" asp-for="Initiative.Description" placeholder="Description" />
  </div>

  <div class="d-flex gap-2">
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn btn-secondary" href="/Initiatives">Cancel</a>
  </div>
</form>

<hr />

<h4>Tasks in this Initiative</h4>
@if (Model.Tasks == null || Model.Tasks.Count == 0)
{
  <p class="text-muted">No tasks in this initiative.</p>
}
else
{
  <div class="table-responsive">
    <table class="table table-sm">
      <thead><tr><th>Id</th><th>Title</th><th></th></tr></thead>
      <tbody>
        @foreach(var t in Model.Tasks)
        {
          <tr>
            <td>@t.Id</td>
            <td>@t.Title</td>
            <td>
              <a class="btn btn-sm btn-secondary" href="/Tasks/Edit?id=@t.Id">Edit</a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}